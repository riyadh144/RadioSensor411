ARM GAS  /tmp/cc3R8ZGp.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"i2s.cpp"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text._ZN3i2s13set_audiofreqEm,"ax",%progbits
  18              		.align	1
  19              		.global	_ZN3i2s13set_audiofreqEm
  20              		.arch armv7e-m
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  24              		.fpu fpv4-sp-d16
  26              	_ZN3i2s13set_audiofreqEm:
  27              		.fnstart
  28              	.LVL0:
  29              	.LFB133:
  30              		.file 1 "Core/Src/i2s.cpp"
   1:Core/Src/i2s.cpp **** #include "i2s.hpp"
   2:Core/Src/i2s.cpp **** 
   3:Core/Src/i2s.cpp **** i2s::i2s(uint8_t i2sNum, uint32_t audioFreq)
   4:Core/Src/i2s.cpp **** {
   5:Core/Src/i2s.cpp ****     switch(i2sNum)
   6:Core/Src/i2s.cpp ****     {
   7:Core/Src/i2s.cpp ****         case I2S2:
   8:Core/Src/i2s.cpp ****             i2sx.Instance = SPI2;
   9:Core/Src/i2s.cpp ****             break;
  10:Core/Src/i2s.cpp ****         case I2S3:
  11:Core/Src/i2s.cpp ****             i2sx.Instance = SPI3;
  12:Core/Src/i2s.cpp ****             break;
  13:Core/Src/i2s.cpp ****         case I2S4:
  14:Core/Src/i2s.cpp ****             i2sx.Instance = SPI4;
  15:Core/Src/i2s.cpp ****             break;
  16:Core/Src/i2s.cpp ****     }
  17:Core/Src/i2s.cpp ****     __HAL_I2S_DISABLE(&i2sx);
  18:Core/Src/i2s.cpp ****     set_audiofreq(audioFreq);
  19:Core/Src/i2s.cpp **** 
  20:Core/Src/i2s.cpp ****     config_pll_clock(audioFreq);
  21:Core/Src/i2s.cpp ****     if (HAL_I2S_Init(&i2sx) != HAL_OK)
  22:Core/Src/i2s.cpp ****     {
  23:Core/Src/i2s.cpp ****         error_handler();
  24:Core/Src/i2s.cpp ****     }
  25:Core/Src/i2s.cpp **** }
  26:Core/Src/i2s.cpp **** 
  27:Core/Src/i2s.cpp **** uint8_t i2s::set_audiofreq(uint32_t audioFreq)
  28:Core/Src/i2s.cpp **** {
ARM GAS  /tmp/cc3R8ZGp.s 			page 2


  31              		.loc 1 28 1 view -0
  32              		.cfi_startproc
  33              		@ args = 0, pretend = 0, frame = 0
  34              		@ frame_needed = 0, uses_anonymous_args = 0
  35              		.loc 1 28 1 is_stmt 0 view .LVU1
  36 0000 10B5     		push	{r4, lr}
  37              		.save {r4, lr}
  38              	.LCFI0:
  39              		.cfi_def_cfa_offset 8
  40              		.cfi_offset 4, -8
  41              		.cfi_offset 14, -4
  29:Core/Src/i2s.cpp ****   /* Initialize the hAudioOutI2s Instance parameter */
  30:Core/Src/i2s.cpp **** 
  31:Core/Src/i2s.cpp ****  /* Disable I2S block */
  32:Core/Src/i2s.cpp ****   __HAL_I2S_DISABLE(&i2sx);
  42              		.loc 1 32 3 is_stmt 1 view .LVU2
  43 0002 0468     		ldr	r4, [r0]
  44 0004 E269     		ldr	r2, [r4, #28]
  45 0006 22F48062 		bic	r2, r2, #1024
  46 000a E261     		str	r2, [r4, #28]
  33:Core/Src/i2s.cpp **** 
  34:Core/Src/i2s.cpp ****   /* I2S3 peripheral configuration */
  35:Core/Src/i2s.cpp ****   i2sx.Init.AudioFreq   = audioFreq;
  47              		.loc 1 35 3 view .LVU3
  48              		.loc 1 35 25 is_stmt 0 view .LVU4
  49 000c 4161     		str	r1, [r0, #20]
  36:Core/Src/i2s.cpp ****   i2sx.Init.ClockSource = I2S_CLOCK_PLL;
  50              		.loc 1 36 3 is_stmt 1 view .LVU5
  51              		.loc 1 36 25 is_stmt 0 view .LVU6
  52 000e 0022     		movs	r2, #0
  53 0010 C261     		str	r2, [r0, #28]
  37:Core/Src/i2s.cpp ****   i2sx.Init.CPOL        = I2S_CPOL_LOW;
  54              		.loc 1 37 3 is_stmt 1 view .LVU7
  55              		.loc 1 37 25 is_stmt 0 view .LVU8
  56 0012 8261     		str	r2, [r0, #24]
  38:Core/Src/i2s.cpp ****   i2sx.Init.DataFormat  = I2S_DATAFORMAT_16B;
  57              		.loc 1 38 3 is_stmt 1 view .LVU9
  58              		.loc 1 38 25 is_stmt 0 view .LVU10
  59 0014 C260     		str	r2, [r0, #12]
  39:Core/Src/i2s.cpp ****   i2sx.Init.MCLKOutput  = I2S_MCLKOUTPUT_ENABLE;
  60              		.loc 1 39 3 is_stmt 1 view .LVU11
  61              		.loc 1 39 25 is_stmt 0 view .LVU12
  62 0016 4FF40071 		mov	r1, #512
  63              	.LVL1:
  64              		.loc 1 39 25 view .LVU13
  65 001a 0161     		str	r1, [r0, #16]
  40:Core/Src/i2s.cpp ****   i2sx.Init.Mode        = I2S_MODE_MASTER_TX;
  66              		.loc 1 40 3 is_stmt 1 view .LVU14
  67              		.loc 1 40 25 is_stmt 0 view .LVU15
  68 001c 4160     		str	r1, [r0, #4]
  41:Core/Src/i2s.cpp ****   i2sx.Init.Standard    = I2S_STANDARD_PHILIPS;
  69              		.loc 1 41 3 is_stmt 1 view .LVU16
  70              		.loc 1 41 25 is_stmt 0 view .LVU17
  71 001e 8260     		str	r2, [r0, #8]
  42:Core/Src/i2s.cpp ****   
  43:Core/Src/i2s.cpp ****   /* Initialize the I2S peripheral with the structure above */
  44:Core/Src/i2s.cpp ****   if(HAL_I2S_Init(&i2sx) != HAL_OK)
ARM GAS  /tmp/cc3R8ZGp.s 			page 3


  72              		.loc 1 44 3 is_stmt 1 view .LVU18
  73              		.loc 1 44 18 is_stmt 0 view .LVU19
  74 0020 FFF7FEFF 		bl	HAL_I2S_Init
  75              	.LVL2:
  76              		.loc 1 44 3 view .LVU20
  77 0024 08B1     		cbz	r0, .L3
  45:Core/Src/i2s.cpp ****   {
  46:Core/Src/i2s.cpp ****     return false;
  78              		.loc 1 46 12 view .LVU21
  79 0026 0020     		movs	r0, #0
  80              	.L2:
  47:Core/Src/i2s.cpp ****   }
  48:Core/Src/i2s.cpp ****   else
  49:Core/Src/i2s.cpp ****   {
  50:Core/Src/i2s.cpp ****     return true;
  51:Core/Src/i2s.cpp ****   }
  52:Core/Src/i2s.cpp **** }
  81              		.loc 1 52 1 view .LVU22
  82 0028 10BD     		pop	{r4, pc}
  83              	.L3:
  50:Core/Src/i2s.cpp ****   }
  84              		.loc 1 50 12 view .LVU23
  85 002a 0120     		movs	r0, #1
  86 002c FCE7     		b	.L2
  87              		.cfi_endproc
  88              	.LFE133:
  89              		.fnend
  91              		.section	.text._ZN3i2s16config_pll_clockEm,"ax",%progbits
  92              		.align	1
  93              		.global	_ZN3i2s16config_pll_clockEm
  94              		.syntax unified
  95              		.thumb
  96              		.thumb_func
  97              		.fpu fpv4-sp-d16
  99              	_ZN3i2s16config_pll_clockEm:
 100              		.fnstart
 101              	.LVL3:
 102              	.LFB134:
  53:Core/Src/i2s.cpp **** 
  54:Core/Src/i2s.cpp **** void i2s::config_pll_clock(uint32_t audioFreq)
  55:Core/Src/i2s.cpp **** {
 103              		.loc 1 55 1 is_stmt 1 view -0
 104              		.cfi_startproc
 105              		@ args = 0, pretend = 0, frame = 24
 106              		@ frame_needed = 0, uses_anonymous_args = 0
 107              		.loc 1 55 1 is_stmt 0 view .LVU25
 108 0000 30B5     		push	{r4, r5, lr}
 109              		.save {r4, r5, lr}
 110              	.LCFI1:
 111              		.cfi_def_cfa_offset 12
 112              		.cfi_offset 4, -12
 113              		.cfi_offset 5, -8
 114              		.cfi_offset 14, -4
 115              		.pad #28
 116 0002 87B0     		sub	sp, sp, #28
 117              	.LCFI2:
 118              		.cfi_def_cfa_offset 40
ARM GAS  /tmp/cc3R8ZGp.s 			page 4


 119 0004 0446     		mov	r4, r0
  56:Core/Src/i2s.cpp ****     RCC_PeriphCLKInitTypeDef rccclkinit;
 120              		.loc 1 56 5 is_stmt 1 view .LVU26
  57:Core/Src/i2s.cpp ****     uint8_t index = 0, freqindex = 0xFF;
 121              		.loc 1 57 5 view .LVU27
 122              	.LVL4:
  58:Core/Src/i2s.cpp **** 
  59:Core/Src/i2s.cpp ****     for(index = 0; index < 8; index++)
 123              		.loc 1 59 5 view .LVU28
  57:Core/Src/i2s.cpp ****     uint8_t index = 0, freqindex = 0xFF;
 124              		.loc 1 57 24 is_stmt 0 view .LVU29
 125 0006 FF25     		movs	r5, #255
 126              		.loc 1 59 15 view .LVU30
 127 0008 0023     		movs	r3, #0
 128 000a 01E0     		b	.L8
 129              	.LVL5:
 130              	.L7:
 131              		.loc 1 59 5 is_stmt 1 discriminator 2 view .LVU31
 132 000c 0133     		adds	r3, r3, #1
 133              	.LVL6:
 134              		.loc 1 59 5 is_stmt 0 discriminator 2 view .LVU32
 135 000e DBB2     		uxtb	r3, r3
 136              	.LVL7:
 137              	.L8:
 138              		.loc 1 59 26 is_stmt 1 discriminator 1 view .LVU33
 139 0010 072B     		cmp	r3, #7
 140 0012 07D8     		bhi	.L6
  60:Core/Src/i2s.cpp ****     {
  61:Core/Src/i2s.cpp ****     if(I2SFreq[index] == audioFreq)
 141              		.loc 1 61 5 view .LVU34
 142              		.loc 1 61 21 is_stmt 0 view .LVU35
 143 0014 03F11202 		add	r2, r3, #18
 144 0018 54F82220 		ldr	r2, [r4, r2, lsl #2]
 145              		.loc 1 61 5 view .LVU36
 146 001c 8A42     		cmp	r2, r1
 147 001e F5D1     		bne	.L7
  62:Core/Src/i2s.cpp ****     {
  63:Core/Src/i2s.cpp ****         freqindex = index;
 148              		.loc 1 63 19 view .LVU37
 149 0020 1D46     		mov	r5, r3
 150              	.LVL8:
 151              		.loc 1 63 19 view .LVU38
 152 0022 F3E7     		b	.L7
 153              	.LVL9:
 154              	.L6:
  64:Core/Src/i2s.cpp ****     }
  65:Core/Src/i2s.cpp ****     }
  66:Core/Src/i2s.cpp ****     //PLLI2SCLK=50Mhz
  67:Core/Src/i2s.cpp ****     /* Enable PLLI2S clock */
  68:Core/Src/i2s.cpp ****     HAL_RCCEx_GetPeriphCLKConfig(&rccclkinit);
 155              		.loc 1 68 5 is_stmt 1 view .LVU39
 156              		.loc 1 68 33 is_stmt 0 view .LVU40
 157 0024 6846     		mov	r0, sp
 158              	.LVL10:
 159              		.loc 1 68 33 view .LVU41
 160 0026 FFF7FEFF 		bl	HAL_RCCEx_GetPeriphCLKConfig
 161              	.LVL11:
ARM GAS  /tmp/cc3R8ZGp.s 			page 5


  69:Core/Src/i2s.cpp ****     /* PLLI2S_VCO Input = HSE_VALUE/PLL_M = 2 Mhz */
  70:Core/Src/i2s.cpp ****     if ((freqindex & 0x7) == 0)
 162              		.loc 1 70 5 is_stmt 1 view .LVU42
 163 002a 15F0070F 		tst	r5, #7
 164 002e 0FD1     		bne	.L9
  71:Core/Src/i2s.cpp ****     {
  72:Core/Src/i2s.cpp ****     /* I2S clock config
  73:Core/Src/i2s.cpp ****     PLLI2S_VCO = f(VCO clock) = f(PLLI2S clock input) × (PLLI2SN/PLLM)
  74:Core/Src/i2s.cpp ****     I2SCLK = f(PLLI2S clock output) = f(VCO clock) / PLLI2SR */
  75:Core/Src/i2s.cpp **** 
  76:Core/Src/i2s.cpp ****     rccclkinit.PeriphClockSelection = RCC_PERIPHCLK_I2S;
 165              		.loc 1 76 5 view .LVU43
 166              		.loc 1 76 37 is_stmt 0 view .LVU44
 167 0030 0123     		movs	r3, #1
 168 0032 0093     		str	r3, [sp]
  77:Core/Src/i2s.cpp ****     rccclkinit.PLLI2S.PLLI2SN = I2SPLLN[freqindex];
 169              		.loc 1 77 5 is_stmt 1 view .LVU45
 170              		.loc 1 77 50 is_stmt 0 view .LVU46
 171 0034 05F11A03 		add	r3, r5, #26
 172 0038 54F82330 		ldr	r3, [r4, r3, lsl #2]
 173              		.loc 1 77 31 view .LVU47
 174 003c 0293     		str	r3, [sp, #8]
  78:Core/Src/i2s.cpp ****     rccclkinit.PLLI2S.PLLI2SR = I2SPLLR[freqindex];
 175              		.loc 1 78 5 is_stmt 1 view .LVU48
 176              		.loc 1 78 50 is_stmt 0 view .LVU49
 177 003e 2235     		adds	r5, r5, #34
 178              	.LVL12:
 179              		.loc 1 78 50 view .LVU50
 180 0040 54F82530 		ldr	r3, [r4, r5, lsl #2]
 181              		.loc 1 78 31 view .LVU51
 182 0044 0393     		str	r3, [sp, #12]
  79:Core/Src/i2s.cpp ****     HAL_RCCEx_PeriphCLKConfig(&rccclkinit);
 183              		.loc 1 79 5 is_stmt 1 view .LVU52
 184              		.loc 1 79 30 is_stmt 0 view .LVU53
 185 0046 6846     		mov	r0, sp
 186 0048 FFF7FEFF 		bl	HAL_RCCEx_PeriphCLKConfig
 187              	.LVL13:
 188              	.L5:
  80:Core/Src/i2s.cpp ****     }
  81:Core/Src/i2s.cpp ****     else
  82:Core/Src/i2s.cpp ****     {
  83:Core/Src/i2s.cpp ****     /* I2S clock config
  84:Core/Src/i2s.cpp ****     PLLI2S_VCO = f(VCO clock) = f(PLLI2S clock input) × (PLLI2SN/PLLM)
  85:Core/Src/i2s.cpp ****     I2SCLK = f(PLLI2S clock output) = f(VCO clock) / PLLI2SR */
  86:Core/Src/i2s.cpp ****     rccclkinit.PeriphClockSelection = RCC_PERIPHCLK_I2S;
  87:Core/Src/i2s.cpp ****     rccclkinit.PLLI2S.PLLI2SN = 258;
  88:Core/Src/i2s.cpp ****     rccclkinit.PLLI2S.PLLI2SR = 3;
  89:Core/Src/i2s.cpp ****     HAL_RCCEx_PeriphCLKConfig(&rccclkinit);
  90:Core/Src/i2s.cpp ****     }
  91:Core/Src/i2s.cpp **** }
 189              		.loc 1 91 1 view .LVU54
 190 004c 07B0     		add	sp, sp, #28
 191              	.LCFI3:
 192              		.cfi_remember_state
 193              		.cfi_def_cfa_offset 12
 194              		@ sp needed
 195 004e 30BD     		pop	{r4, r5, pc}
ARM GAS  /tmp/cc3R8ZGp.s 			page 6


 196              	.LVL14:
 197              	.L9:
 198              	.LCFI4:
 199              		.cfi_restore_state
  86:Core/Src/i2s.cpp ****     rccclkinit.PLLI2S.PLLI2SN = 258;
 200              		.loc 1 86 5 is_stmt 1 view .LVU55
  86:Core/Src/i2s.cpp ****     rccclkinit.PLLI2S.PLLI2SN = 258;
 201              		.loc 1 86 37 is_stmt 0 view .LVU56
 202 0050 0123     		movs	r3, #1
 203 0052 0093     		str	r3, [sp]
  87:Core/Src/i2s.cpp ****     rccclkinit.PLLI2S.PLLI2SR = 3;
 204              		.loc 1 87 5 is_stmt 1 view .LVU57
  87:Core/Src/i2s.cpp ****     rccclkinit.PLLI2S.PLLI2SR = 3;
 205              		.loc 1 87 31 is_stmt 0 view .LVU58
 206 0054 4FF48173 		mov	r3, #258
 207 0058 0293     		str	r3, [sp, #8]
  88:Core/Src/i2s.cpp ****     HAL_RCCEx_PeriphCLKConfig(&rccclkinit);
 208              		.loc 1 88 5 is_stmt 1 view .LVU59
  88:Core/Src/i2s.cpp ****     HAL_RCCEx_PeriphCLKConfig(&rccclkinit);
 209              		.loc 1 88 31 is_stmt 0 view .LVU60
 210 005a 0323     		movs	r3, #3
 211 005c 0393     		str	r3, [sp, #12]
  89:Core/Src/i2s.cpp ****     }
 212              		.loc 1 89 5 is_stmt 1 view .LVU61
  89:Core/Src/i2s.cpp ****     }
 213              		.loc 1 89 30 is_stmt 0 view .LVU62
 214 005e 6846     		mov	r0, sp
 215 0060 FFF7FEFF 		bl	HAL_RCCEx_PeriphCLKConfig
 216              	.LVL15:
 217              		.loc 1 91 1 view .LVU63
 218 0064 F2E7     		b	.L5
 219              		.cfi_endproc
 220              	.LFE134:
 221              		.fnend
 223              		.section	.text._ZN3i2sC2Ehm,"ax",%progbits
 224              		.align	1
 225              		.global	_ZN3i2sC2Ehm
 226              		.syntax unified
 227              		.thumb
 228              		.thumb_func
 229              		.fpu fpv4-sp-d16
 231              	_ZN3i2sC2Ehm:
 232              		.fnstart
 233              	.LVL16:
 234              	.LFB131:
   3:Core/Src/i2s.cpp **** {
 235              		.loc 1 3 1 is_stmt 1 view -0
 236              		.cfi_startproc
 237              		@ args = 0, pretend = 0, frame = 0
 238              		@ frame_needed = 0, uses_anonymous_args = 0
   3:Core/Src/i2s.cpp **** {
 239              		.loc 1 3 1 is_stmt 0 view .LVU65
 240 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 241              		.save {r4, r5, r6, r7, r8, lr}
 242              	.LCFI5:
 243              		.cfi_def_cfa_offset 24
 244              		.cfi_offset 4, -24
ARM GAS  /tmp/cc3R8ZGp.s 			page 7


 245              		.cfi_offset 5, -20
 246              		.cfi_offset 6, -16
 247              		.cfi_offset 7, -12
 248              		.cfi_offset 8, -8
 249              		.cfi_offset 14, -4
 250 0004 0546     		mov	r5, r0
 251 0006 8C46     		mov	ip, r1
 252 0008 9046     		mov	r8, r2
 253              	.LBB2:
   3:Core/Src/i2s.cpp **** {
 254              		.loc 1 3 44 view .LVU66
 255 000a 214C     		ldr	r4, .L19
 256 000c 00F14806 		add	r6, r0, #72
 257 0010 2746     		mov	r7, r4
 258 0012 0FCF     		ldmia	r7!, {r0, r1, r2, r3}
 259              	.LVL17:
   3:Core/Src/i2s.cpp **** {
 260              		.loc 1 3 44 view .LVU67
 261 0014 0FC6     		stmia	r6!, {r0, r1, r2, r3}
 262 0016 97E80F00 		ldm	r7, {r0, r1, r2, r3}
 263 001a 86E80F00 		stm	r6, {r0, r1, r2, r3}
 264 001e 05F16806 		add	r6, r5, #104
 265 0022 04F12007 		add	r7, r4, #32
 266 0026 0FCF     		ldmia	r7!, {r0, r1, r2, r3}
 267 0028 0FC6     		stmia	r6!, {r0, r1, r2, r3}
 268 002a 97E80F00 		ldm	r7, {r0, r1, r2, r3}
 269 002e 86E80F00 		stm	r6, {r0, r1, r2, r3}
 270 0032 05F18806 		add	r6, r5, #136
 271 0036 4034     		adds	r4, r4, #64
 272 0038 0FCC     		ldmia	r4!, {r0, r1, r2, r3}
 273 003a 0FC6     		stmia	r6!, {r0, r1, r2, r3}
 274 003c 94E80F00 		ldm	r4, {r0, r1, r2, r3}
 275 0040 86E80F00 		stm	r6, {r0, r1, r2, r3}
   5:Core/Src/i2s.cpp ****     {
 276              		.loc 1 5 5 is_stmt 1 view .LVU68
 277 0044 BCF1030F 		cmp	ip, #3
 278 0048 1BD0     		beq	.L14
 279 004a BCF1040F 		cmp	ip, #4
 280 004e 1BD0     		beq	.L15
 281 0050 BCF1020F 		cmp	ip, #2
 282 0054 12D0     		beq	.L18
 283              	.L16:
  17:Core/Src/i2s.cpp ****     set_audiofreq(audioFreq);
 284              		.loc 1 17 5 view .LVU69
 285 0056 2A68     		ldr	r2, [r5]
 286 0058 D369     		ldr	r3, [r2, #28]
 287 005a 23F48063 		bic	r3, r3, #1024
 288 005e D361     		str	r3, [r2, #28]
  18:Core/Src/i2s.cpp **** 
 289              		.loc 1 18 5 view .LVU70
  18:Core/Src/i2s.cpp **** 
 290              		.loc 1 18 18 is_stmt 0 view .LVU71
 291 0060 4146     		mov	r1, r8
 292 0062 2846     		mov	r0, r5
 293 0064 FFF7FEFF 		bl	_ZN3i2s13set_audiofreqEm
 294              	.LVL18:
  20:Core/Src/i2s.cpp ****     if (HAL_I2S_Init(&i2sx) != HAL_OK)
ARM GAS  /tmp/cc3R8ZGp.s 			page 8


 295              		.loc 1 20 5 is_stmt 1 view .LVU72
  20:Core/Src/i2s.cpp ****     if (HAL_I2S_Init(&i2sx) != HAL_OK)
 296              		.loc 1 20 21 is_stmt 0 view .LVU73
 297 0068 4146     		mov	r1, r8
 298 006a 2846     		mov	r0, r5
 299 006c FFF7FEFF 		bl	_ZN3i2s16config_pll_clockEm
 300              	.LVL19:
  21:Core/Src/i2s.cpp ****     {
 301              		.loc 1 21 5 is_stmt 1 view .LVU74
  21:Core/Src/i2s.cpp ****     {
 302              		.loc 1 21 21 is_stmt 0 view .LVU75
 303 0070 2846     		mov	r0, r5
 304 0072 FFF7FEFF 		bl	HAL_I2S_Init
 305              	.LVL20:
 306              	.LBE2:
  25:Core/Src/i2s.cpp **** 
 307              		.loc 1 25 1 view .LVU76
 308 0076 2846     		mov	r0, r5
 309 0078 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 310              	.LVL21:
 311              	.L18:
 312              	.LBB3:
   7:Core/Src/i2s.cpp ****             i2sx.Instance = SPI2;
 313              		.loc 1 7 9 is_stmt 1 view .LVU77
   8:Core/Src/i2s.cpp ****             break;
 314              		.loc 1 8 13 view .LVU78
   8:Core/Src/i2s.cpp ****             break;
 315              		.loc 1 8 27 is_stmt 0 view .LVU79
 316 007c 054B     		ldr	r3, .L19+4
 317 007e 2B60     		str	r3, [r5]
   9:Core/Src/i2s.cpp ****         case I2S3:
 318              		.loc 1 9 13 is_stmt 1 view .LVU80
 319 0080 E9E7     		b	.L16
 320              	.L14:
  10:Core/Src/i2s.cpp ****             i2sx.Instance = SPI3;
 321              		.loc 1 10 9 view .LVU81
  11:Core/Src/i2s.cpp ****             break;
 322              		.loc 1 11 13 view .LVU82
  11:Core/Src/i2s.cpp ****             break;
 323              		.loc 1 11 27 is_stmt 0 view .LVU83
 324 0082 054B     		ldr	r3, .L19+8
 325 0084 2B60     		str	r3, [r5]
  12:Core/Src/i2s.cpp ****         case I2S4:
 326              		.loc 1 12 13 is_stmt 1 view .LVU84
 327 0086 E6E7     		b	.L16
 328              	.L15:
  13:Core/Src/i2s.cpp ****             i2sx.Instance = SPI4;
 329              		.loc 1 13 9 view .LVU85
  14:Core/Src/i2s.cpp ****             break;
 330              		.loc 1 14 13 view .LVU86
  14:Core/Src/i2s.cpp ****             break;
 331              		.loc 1 14 27 is_stmt 0 view .LVU87
 332 0088 044B     		ldr	r3, .L19+12
 333 008a 2B60     		str	r3, [r5]
  15:Core/Src/i2s.cpp ****     }
 334              		.loc 1 15 13 is_stmt 1 view .LVU88
 335 008c E3E7     		b	.L16
ARM GAS  /tmp/cc3R8ZGp.s 			page 9


 336              	.L20:
 337 008e 00BF     		.align	2
 338              	.L19:
 339 0090 00000000 		.word	.LANCHOR0
 340 0094 00380040 		.word	1073756160
 341 0098 003C0040 		.word	1073757184
 342 009c 00340140 		.word	1073820672
 343              	.LBE3:
 344              		.cfi_endproc
 345              	.LFE131:
 346              		.fnend
 348              		.global	_ZN3i2sC1Ehm
 349              		.thumb_set _ZN3i2sC1Ehm,_ZN3i2sC2Ehm
 350              		.section	.text._ZN3i2s4playEPtm,"ax",%progbits
 351              		.align	1
 352              		.global	_ZN3i2s4playEPtm
 353              		.syntax unified
 354              		.thumb
 355              		.thumb_func
 356              		.fpu fpv4-sp-d16
 358              	_ZN3i2s4playEPtm:
 359              		.fnstart
 360              	.LVL22:
 361              	.LFB135:
  92:Core/Src/i2s.cpp **** 
  93:Core/Src/i2s.cpp **** void i2s::play(uint16_t* audioBuffer, uint32_t len)
  94:Core/Src/i2s.cpp **** {
 362              		.loc 1 94 1 view -0
 363              		.cfi_startproc
 364              		@ args = 0, pretend = 0, frame = 0
 365              		@ frame_needed = 0, uses_anonymous_args = 0
 366              		.loc 1 94 1 is_stmt 0 view .LVU90
 367 0000 08B5     		push	{r3, lr}
 368              		.save {r3, lr}
 369              	.LCFI6:
 370              		.cfi_def_cfa_offset 8
 371              		.cfi_offset 3, -8
 372              		.cfi_offset 14, -4
  95:Core/Src/i2s.cpp ****     HAL_I2S_Transmit_DMA(&i2sx, audioBuffer, DMA_MAX(len/AUDIODATA_SIZE));
 373              		.loc 1 95 5 is_stmt 1 view .LVU91
 374              		.loc 1 95 25 is_stmt 0 view .LVU92
 375 0002 B2F5003F 		cmp	r2, #131072
 376 0006 04D2     		bcs	.L23
 377              		.loc 1 95 25 discriminator 1 view .LVU93
 378 0008 C2F34F02 		ubfx	r2, r2, #1, #16
 379              	.LVL23:
 380              	.L22:
 381              		.loc 1 95 25 discriminator 4 view .LVU94
 382 000c FFF7FEFF 		bl	HAL_I2S_Transmit_DMA
 383              	.LVL24:
  96:Core/Src/i2s.cpp **** }
 384              		.loc 1 96 1 discriminator 4 view .LVU95
 385 0010 08BD     		pop	{r3, pc}
 386              	.LVL25:
 387              	.L23:
  95:Core/Src/i2s.cpp ****     HAL_I2S_Transmit_DMA(&i2sx, audioBuffer, DMA_MAX(len/AUDIODATA_SIZE));
 388              		.loc 1 95 25 view .LVU96
ARM GAS  /tmp/cc3R8ZGp.s 			page 10


 389 0012 4FF6FF72 		movw	r2, #65535
 390              	.LVL26:
  95:Core/Src/i2s.cpp ****     HAL_I2S_Transmit_DMA(&i2sx, audioBuffer, DMA_MAX(len/AUDIODATA_SIZE));
 391              		.loc 1 95 25 view .LVU97
 392 0016 F9E7     		b	.L22
 393              		.cfi_endproc
 394              	.LFE135:
 395              		.fnend
 397              		.section	.text._ZN3i2s13change_bufferEPtm,"ax",%progbits
 398              		.align	1
 399              		.global	_ZN3i2s13change_bufferEPtm
 400              		.syntax unified
 401              		.thumb
 402              		.thumb_func
 403              		.fpu fpv4-sp-d16
 405              	_ZN3i2s13change_bufferEPtm:
 406              		.fnstart
 407              	.LVL27:
 408              	.LFB136:
  97:Core/Src/i2s.cpp **** 
  98:Core/Src/i2s.cpp **** void i2s::change_buffer(uint16_t* audioBuffer, uint32_t len)
  99:Core/Src/i2s.cpp **** {
 409              		.loc 1 99 1 is_stmt 1 view -0
 410              		.cfi_startproc
 411              		@ args = 0, pretend = 0, frame = 0
 412              		@ frame_needed = 0, uses_anonymous_args = 0
 413              		.loc 1 99 1 is_stmt 0 view .LVU99
 414 0000 08B5     		push	{r3, lr}
 415              		.save {r3, lr}
 416              	.LCFI7:
 417              		.cfi_def_cfa_offset 8
 418              		.cfi_offset 3, -8
 419              		.cfi_offset 14, -4
 100:Core/Src/i2s.cpp ****     HAL_I2S_Transmit_DMA(&i2sx, audioBuffer, DMA_MAX(len));
 420              		.loc 1 100 5 is_stmt 1 view .LVU100
 421              		.loc 1 100 46 is_stmt 0 view .LVU101
 422 0002 4FF6FF73 		movw	r3, #65535
 423 0006 9A42     		cmp	r2, r3
 424 0008 28BF     		it	cs
 425 000a 1A46     		movcs	r2, r3
 426              	.LVL28:
 427              		.loc 1 100 25 view .LVU102
 428 000c 92B2     		uxth	r2, r2
 429 000e FFF7FEFF 		bl	HAL_I2S_Transmit_DMA
 430              	.LVL29:
 101:Core/Src/i2s.cpp ****     //TODO:Understand what is going on here
 102:Core/Src/i2s.cpp ****     //For now it is just copied from an example
 103:Core/Src/i2s.cpp **** }
 431              		.loc 1 103 1 view .LVU103
 432 0012 08BD     		pop	{r3, pc}
 433              		.cfi_endproc
 434              	.LFE136:
 435              		.fnend
 437              		.section	.text._ZN3i2s5pauseEv,"ax",%progbits
 438              		.align	1
 439              		.global	_ZN3i2s5pauseEv
 440              		.syntax unified
ARM GAS  /tmp/cc3R8ZGp.s 			page 11


 441              		.thumb
 442              		.thumb_func
 443              		.fpu fpv4-sp-d16
 445              	_ZN3i2s5pauseEv:
 446              		.fnstart
 447              	.LVL30:
 448              	.LFB137:
 104:Core/Src/i2s.cpp **** 
 105:Core/Src/i2s.cpp **** void i2s::pause()
 106:Core/Src/i2s.cpp **** {
 449              		.loc 1 106 1 is_stmt 1 view -0
 450              		.cfi_startproc
 451              		@ args = 0, pretend = 0, frame = 0
 452              		@ frame_needed = 0, uses_anonymous_args = 0
 453              		.loc 1 106 1 is_stmt 0 view .LVU105
 454 0000 08B5     		push	{r3, lr}
 455              		.save {r3, lr}
 456              	.LCFI8:
 457              		.cfi_def_cfa_offset 8
 458              		.cfi_offset 3, -8
 459              		.cfi_offset 14, -4
 107:Core/Src/i2s.cpp ****     HAL_I2S_DMAPause(&i2sx);
 460              		.loc 1 107 5 is_stmt 1 view .LVU106
 461              		.loc 1 107 21 is_stmt 0 view .LVU107
 462 0002 FFF7FEFF 		bl	HAL_I2S_DMAPause
 463              	.LVL31:
 108:Core/Src/i2s.cpp **** }
 464              		.loc 1 108 1 view .LVU108
 465 0006 08BD     		pop	{r3, pc}
 466              		.cfi_endproc
 467              	.LFE137:
 468              		.fnend
 470              		.section	.text._ZN3i2s4stopEv,"ax",%progbits
 471              		.align	1
 472              		.global	_ZN3i2s4stopEv
 473              		.syntax unified
 474              		.thumb
 475              		.thumb_func
 476              		.fpu fpv4-sp-d16
 478              	_ZN3i2s4stopEv:
 479              		.fnstart
 480              	.LVL32:
 481              	.LFB138:
 109:Core/Src/i2s.cpp **** void i2s::stop()
 110:Core/Src/i2s.cpp **** {
 482              		.loc 1 110 1 is_stmt 1 view -0
 483              		.cfi_startproc
 484              		@ args = 0, pretend = 0, frame = 0
 485              		@ frame_needed = 0, uses_anonymous_args = 0
 486              		.loc 1 110 1 is_stmt 0 view .LVU110
 487 0000 08B5     		push	{r3, lr}
 488              		.save {r3, lr}
 489              	.LCFI9:
 490              		.cfi_def_cfa_offset 8
 491              		.cfi_offset 3, -8
 492              		.cfi_offset 14, -4
 111:Core/Src/i2s.cpp ****     HAL_I2S_DMAStop(&i2sx);
ARM GAS  /tmp/cc3R8ZGp.s 			page 12


 493              		.loc 1 111 5 is_stmt 1 view .LVU111
 494              		.loc 1 111 20 is_stmt 0 view .LVU112
 495 0002 FFF7FEFF 		bl	HAL_I2S_DMAStop
 496              	.LVL33:
 112:Core/Src/i2s.cpp **** }
 497              		.loc 1 112 1 view .LVU113
 498 0006 08BD     		pop	{r3, pc}
 499              		.cfi_endproc
 500              	.LFE138:
 501              		.fnend
 503              		.section	.text._ZN3i2s13error_handlerEv,"ax",%progbits
 504              		.align	1
 505              		.global	_ZN3i2s13error_handlerEv
 506              		.syntax unified
 507              		.thumb
 508              		.thumb_func
 509              		.fpu fpv4-sp-d16
 511              	_ZN3i2s13error_handlerEv:
 512              		.fnstart
 513              	.LVL34:
 514              	.LFB139:
 113:Core/Src/i2s.cpp **** void i2s::error_handler()
 114:Core/Src/i2s.cpp **** {
 515              		.loc 1 114 1 is_stmt 1 view -0
 516              		.cfi_startproc
 517              		@ args = 0, pretend = 0, frame = 0
 518              		@ frame_needed = 0, uses_anonymous_args = 0
 519              		@ link register save eliminated.
 115:Core/Src/i2s.cpp ****     
 116:Core/Src/i2s.cpp **** }...
 520              		.loc 1 116 1 is_stmt 0 view .LVU115
 521 0000 7047     		bx	lr
 522              		.cfi_endproc
 523              	.LFE139:
 524              		.cantunwind
 525              		.fnend
 527              		.section	.rodata
 528              		.align	2
 529              		.set	.LANCHOR0,. + 0
 530              	.LC0:
 531 0000 401F0000 		.word	8000
 532 0004 112B0000 		.word	11025
 533 0008 803E0000 		.word	16000
 534 000c 22560000 		.word	22050
 535 0010 007D0000 		.word	32000
 536 0014 44AC0000 		.word	44100
 537 0018 80BB0000 		.word	48000
 538 001c 00770100 		.word	96000
 539              	.LC1:
 540 0020 00010000 		.word	256
 541 0024 AD010000 		.word	429
 542 0028 D5000000 		.word	213
 543 002c AD010000 		.word	429
 544 0030 AA010000 		.word	426
 545 0034 0F010000 		.word	271
 546 0038 02010000 		.word	258
 547 003c 58010000 		.word	344
ARM GAS  /tmp/cc3R8ZGp.s 			page 13


 548              	.LC2:
 549 0040 05000000 		.word	5
 550 0044 04000000 		.word	4
 551 0048 04000000 		.word	4
 552 004c 04000000 		.word	4
 553 0050 04000000 		.word	4
 554 0054 06000000 		.word	6
 555 0058 03000000 		.word	3
 556 005c 01000000 		.word	1
 557              		.text
 558              	.Letext0:
 559              		.file 2 "/usr/lib/gcc/arm-none-eabi/9.2.1/include/stdint.h"
 560              		.file 3 "Drivers/CMSIS/Include/core_cm4.h"
 561              		.file 4 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/system_stm32f4xx.h"
 562              		.file 5 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f411xe.h"
 563              		.file 6 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_def.h"
 564              		.file 7 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_rcc_ex.h"
 565              		.file 8 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_dma.h"
 566              		.file 9 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_i2s.h"
 567              		.file 10 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal.h"
 568              		.file 11 "Core/Inc/i2s.hpp"
ARM GAS  /tmp/cc3R8ZGp.s 			page 14


DEFINED SYMBOLS
                            *ABS*:0000000000000000 i2s.cpp
     /tmp/cc3R8ZGp.s:18     .text._ZN3i2s13set_audiofreqEm:0000000000000000 $t
     /tmp/cc3R8ZGp.s:26     .text._ZN3i2s13set_audiofreqEm:0000000000000000 _ZN3i2s13set_audiofreqEm
.ARM.exidx.text._ZN3i2s13set_audiofreqEm:0000000000000000 $d
     /tmp/cc3R8ZGp.s:92     .text._ZN3i2s16config_pll_clockEm:0000000000000000 $t
     /tmp/cc3R8ZGp.s:99     .text._ZN3i2s16config_pll_clockEm:0000000000000000 _ZN3i2s16config_pll_clockEm
.ARM.exidx.text._ZN3i2s16config_pll_clockEm:0000000000000000 $d
     /tmp/cc3R8ZGp.s:224    .text._ZN3i2sC2Ehm:0000000000000000 $t
     /tmp/cc3R8ZGp.s:231    .text._ZN3i2sC2Ehm:0000000000000000 _ZN3i2sC2Ehm
     /tmp/cc3R8ZGp.s:339    .text._ZN3i2sC2Ehm:0000000000000090 $d
     .ARM.exidx.text._ZN3i2sC2Ehm:0000000000000000 $d
     /tmp/cc3R8ZGp.s:231    .text._ZN3i2sC2Ehm:0000000000000000 _ZN3i2sC1Ehm
     /tmp/cc3R8ZGp.s:351    .text._ZN3i2s4playEPtm:0000000000000000 $t
     /tmp/cc3R8ZGp.s:358    .text._ZN3i2s4playEPtm:0000000000000000 _ZN3i2s4playEPtm
 .ARM.extab.text._ZN3i2s4playEPtm:0000000000000000 $d
 .ARM.exidx.text._ZN3i2s4playEPtm:0000000000000000 $d
     /tmp/cc3R8ZGp.s:398    .text._ZN3i2s13change_bufferEPtm:0000000000000000 $t
     /tmp/cc3R8ZGp.s:405    .text._ZN3i2s13change_bufferEPtm:0000000000000000 _ZN3i2s13change_bufferEPtm
.ARM.extab.text._ZN3i2s13change_bufferEPtm:0000000000000000 $d
.ARM.exidx.text._ZN3i2s13change_bufferEPtm:0000000000000000 $d
     /tmp/cc3R8ZGp.s:438    .text._ZN3i2s5pauseEv:0000000000000000 $t
     /tmp/cc3R8ZGp.s:445    .text._ZN3i2s5pauseEv:0000000000000000 _ZN3i2s5pauseEv
  .ARM.extab.text._ZN3i2s5pauseEv:0000000000000000 $d
  .ARM.exidx.text._ZN3i2s5pauseEv:0000000000000000 $d
     /tmp/cc3R8ZGp.s:471    .text._ZN3i2s4stopEv:0000000000000000 $t
     /tmp/cc3R8ZGp.s:478    .text._ZN3i2s4stopEv:0000000000000000 _ZN3i2s4stopEv
   .ARM.extab.text._ZN3i2s4stopEv:0000000000000000 $d
   .ARM.exidx.text._ZN3i2s4stopEv:0000000000000000 $d
     /tmp/cc3R8ZGp.s:504    .text._ZN3i2s13error_handlerEv:0000000000000000 $t
     /tmp/cc3R8ZGp.s:511    .text._ZN3i2s13error_handlerEv:0000000000000000 _ZN3i2s13error_handlerEv
.ARM.exidx.text._ZN3i2s13error_handlerEv:0000000000000000 $d
     /tmp/cc3R8ZGp.s:528    .rodata:0000000000000000 $d

UNDEFINED SYMBOLS
HAL_I2S_Init
__aeabi_unwind_cpp_pr0
HAL_RCCEx_GetPeriphCLKConfig
HAL_RCCEx_PeriphCLKConfig
HAL_I2S_Transmit_DMA
__aeabi_unwind_cpp_pr1
HAL_I2S_DMAPause
HAL_I2S_DMAStop
